<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>data structures/constructionNode.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AvlNode.html">AvlNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlNode.html#leftHeight">leftHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkLeft">linkLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkRight">linkRight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rightHeight">rightHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateLeft">rotateLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateRight">rotateRight</a></li></ul></li><li><a href="AvlTree.html">AvlTree</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlTree.html#.getBalanceState">getBalanceState</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#.maxValueNode">maxValueNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#.minValueNode">minValueNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#_compare">_compare</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#_delete">_delete</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#_get">_get</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#_insert">_insert</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#contains">contains</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximum">findMaximum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximumNode">findMaximumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimum">findMinimum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimumNode">findMinimumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#getNode">getNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#insert">insert</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#isEmpty">isEmpty</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#next">next</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#prev">prev</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#size">size</a></li></ul></li><li><a href="Caret.html">Caret</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Caret.html#advance">advance</a></li><li data-type='method' style='display: none;'><a href="Caret.html#getChar">getChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#increment">increment</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readNumber">readNumber</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readUntil">readUntil</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readWord">readWord</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToChar">skipToChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToContent">skipToContent</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToString">skipToString</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToStringList">skipToStringList</a></li><li data-type='method' style='display: none;'><a href="Caret.html#throwError">throwError</a></li></ul></li><li><a href="ConstructionNode.html">ConstructionNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ConstructionNode.html#_mergeChildren">_mergeChildren</a></li><li data-type='method' style='display: none;'><a href="ConstructionNode.html#_setGenders">_setGenders</a></li><li data-type='method' style='display: none;'><a href="ConstructionNode.html#getName">getName</a></li><li data-type='method' style='display: none;'><a href="ConstructionNode.html#setGenders">setGenders</a></li></ul></li><li><a href="Point.html">Point</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Point.html#.product">product</a></li><li data-type='method' style='display: none;'><a href="Point.html#clone">clone</a></li><li data-type='method' style='display: none;'><a href="Point.html#dimensions">dimensions</a></li><li data-type='method' style='display: none;'><a href="Point.html#scale">scale</a></li></ul></li><li><a href="Polytope.html">Polytope</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Polytope.html#._checkCommonElements">_checkCommonElements</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._divide">_divide</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._gcd">_gcd</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._getIndexOfPrismProduct">_getIndexOfPrismProduct</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._minimize">_minimize</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._OFFReaderOnload">_OFFReaderOnload</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._prismProduct">_prismProduct</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._product">_product</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.adjacentEls">adjacentEls</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.dyad">dyad</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.nullitope">nullitope</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.point">point</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.prismProduct">prismProduct</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.regularPolygon">regularPolygon</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.semiregularPolygon">semiregularPolygon</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.verfLength">verfLength</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#circumradius">circumradius</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#extrudeToPyramid">extrudeToPyramid</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#getName">getName</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#move">move</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#moveNeg">moveNeg</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#polytopeToGraph">polytopeToGraph</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#renderTo">renderTo</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#saveAsOFF">saveAsOFF</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#scale">scale</a></li></ul></li><li><a href="PolytopeC.html">PolytopeC</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PolytopeC.html#faceToVertices">faceToVertices</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#gravicenter">gravicenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#recenter">recenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#setSpaceDimensions">setSpaceDimensions</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#toPolytopeC">toPolytopeC</a></li></ul></li><li><a href="SweeplineEdge.html">SweeplineEdge</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#rightVertex">rightVertex</a></li><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#updateRedirectTable">updateRedirectTable</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="BalanceState.html">BalanceState</a></li><li><a href="ConstructionNodeType.html">ConstructionNodeType</a></li><li><a href="Translation.html">Translation</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Translation.html#.addAdjective">addAdjective</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.elementName">elementName</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.greekPrefix">greekPrefix</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-translation_.html">How to translate Miratope?</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">data structures/constructionNode.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

/**
 * An object containing the possible types of {@link ConstructionNode|ConstructionNodes}.
 * @enum {number}
 * @namespace ConstructionNodeType
 */
const ConstructionNodeType = {
	/**
	 * The corresponding ConstructionNode has two children `[n, d]`,
	 * representing the number of facets `n`
	 * and the number of dimensions `d` of the polytope.
	 */
	Plain: 0,

	/**
	 * The corresponding ConstructionNode has two children `[n, d]`, representing
	 * the regular polygon {`n`/`d`}.
	 */
	Polygon: 1,

	/**
	 * The corresponding ConstructionNode has an array with the factors of a prism product
	 * as children.
	 */
	Multiprism: 2,

	/**
	 * The corresponding ConstructionNode has an array with the factors of a tegum product
	 * as children.
	 */
	Multitegum: 3,

	/**
	 * The corresponding ConstructionNode has an array with the factors of a pyramid product
	 * as children.
	 */
	Multipyramid: 4,

	/**
	 * The corresponding ConstructionNode has a single child representing the antiprismatic base.
	 */
	Antiprism: 5,

	/**
	 * The corresponding ConstructionNode has a single child representing the pyramidal base.
	 */
	Pyramid: 6,

	/**
	 * The corresponding ConstructionNode has a single child representing the cupoidal base.
	 */
	Cupola: 7,

	/**
	 * The corresponding ConstructionNode has two children `[n, d]`, representing
	 * the regular polygonal base {`n`/`d`}
	 * of a cuploid.
	 */
	Cuploid: 8,

	/**
	 * The corresponding ConstructionNode has two children `[n, d]`, representing
	 * the regular polygonal base {`n`/`d`}
	 * of a cupolaic blend.
	 */
	CupolaicBlend: 9,

	/**
	 * The corresponding ConstructionNode has a polytope's "code name" as a child.
	 * Used for polytopes whose names are in loadMessages.js.
	 * Can be translated.
	 */
	Codename: 10,

	/**
	 * The corresponding ConstructionNode has a polytope's name as a child.
	 * The default for imported polytopes,
	 * or polytopes not built out of anything else whose name is known.
	 * Can **not** be translated.
	 */
	Name: 11,

	/**
	 * The corresponding ConstructionNode has the dimension of a hypercube as a child.
	 */
	Hypercube: 12,

	/**
	 * The corresponding ConstructionNode has the dimension of a simplex as a child.
	 */
	Simplex: 13,

	/**
	 * The corresponding ConstructionNode has the dimension of an orthoplex as a child.
	 */
	Cross: 14
};

/**
 * Creates a new ConstructionNode.
 * @constructor
 * @classdesc A ConstructionNode represents how a polytope has been built up.
 * ConstructionNodes come in various types, and always have at least one child.
 * Depending on the node type, these children can either be single objects,
 * or arrays of ConstructionNodes or other objects.&lt;br />
 * &amp;emsp;The possible node types and their descriptions are given in
 * {@link ConstructionNodeType}.
 * @param {ConstructionNodeType} type The ConstructionNode type.
 * @param {(ConstructionNode|ConstructionNode[]|number[]|string)} children
 * The child or children of the node. The type of this variable depends on `type`.
 */
function ConstructionNode(type, children) {
	this.type = type;
	this.children = children;
	this.setGenders();
};

/**
 * Gets the name of a ConstructionNode's polytope based on its type.
 * Recursively calls itself on the ConstructionNode's children when possible.
 * @returns {string} The name of the polytope associated to the ConstructionNode.
 * @see [Polytope.prototype.getName]{@linkcode Polytope#getName}
 * @example
 * //"great heptagram"
 * Polytope.regularPolygon(7,3).constructione.getName();
 *
 * //"pentachoric prism"
 * Polytope.simplex(4).extrudeToPrism(1).construction.getName();
 *
 * //"pentagonal bipyramid"
 * Polytope.tegumProduct(Polytope.regularPolygon(5), Polytope.dyad()).construction.getName();
 */
ConstructionNode.prototype.getName = function() {
	switch(this.type) {
		case ConstructionNodeType.Plain:
			return Translation.plainName(this.children[0], this.children[1]);
		case ConstructionNodeType.Multiprism:
			this._mergeChildren();
			return Translation.multiFamily(this.children, "family/prism", "shape/dyad", "family/prism", this.gender);
		case ConstructionNodeType.Multitegum:
			this._mergeChildren();
			return Translation.multiFamily(this.children, "family/tegum", "shape/dyad", "family/bipyramid", this.gender);
		case ConstructionNodeType.Multipyramid:
			this._mergeChildren();
			return Translation.multiFamily(this.children, "family/pyramid", "shape/point", "family/pyramid", this.gender);
		case ConstructionNodeType.Antiprism:
			return Translation.familyMember(this.children, "family/antiprism", this.gender);
		case ConstructionNodeType.Pyramid:
			return Translation.familyMember(this.children, "family/pyramid", this.gender);
		case ConstructionNodeType.Cupola:
			return Translation.familyMember(this.children, "family/cupola", this.gender);
		case ConstructionNodeType.Cuploid:
			return Translation.familyMember(this.children[0], "family/cuploid", this.gender);
		case ConstructionNodeType.CupolaicBlend:
			return Translation.familyMember(this.children[0], "family/cupolaicBlend", this.gender);
		case ConstructionNodeType.Polygon:
			return Translation.regularPolygonName(this.children[0], this.children[1], {gender: this.gender});
		case ConstructionNodeType.Codename:
			return Translation.get("shape/" + this.children);
		case ConstructionNodeType.Name:
			return this.children;
		case ConstructionNodeType.Hypercube:
			return Translation.hypercube(this.children);
		case ConstructionNodeType.Simplex:
			return Translation.simplex(this.children);
		case ConstructionNodeType.Cross:
			return Translation.cross(this.children);
		default:
			throw new Error("Not yet implemented!");
	}
};

/**
 * Sets the grammatical gender of the noun representing the root node's type
 * as the gender of all children nodes.
 * Is automatically called whenever the
 * [ConstructionNode constructor]{@link ConstructionNode#ConstructionNode}
 * is called.
 * @example
 * Translation.setLanguage("es");
 *
 * //setGenders() is automatically called when the polytope is generated.
 * //As a result, even though the word "cúpula" is femenine in Spanish,
 * //the final result will have the gender of the word "prisma",
 * //which is masculine.
 * var P = Polytope.cupola(5, 3).extrudeToPrism();
 *
 * //"prisma cupoidal pentagrámico cruzado"
 * console.log(P.getName());
 */
ConstructionNode.prototype.setGenders = function() {
	if(!Translation.genderedLanguage) return;

	switch(this.type) {
		case ConstructionNodeType.Polygon: //The gender of the plain polygon names
		case ConstructionNodeType.Plain: //The gender of the plain polytope names
		case ConstructionNodeType.Multiprism: //The gender of the word "multiprism"
		case ConstructionNodeType.Antiprism: //The gender of the word "antiprism"
		case ConstructionNodeType.Multitegum: //The gender of the word "multitegum"
			switch(Translation.language) {
				case "es": this.gender = "male"; break;
				case "de": this.gender = "neuter"; break;
				default: break;
			}
			break;
		case ConstructionNodeType.Pyramid: //The gender of the word "pyramid"
		case ConstructionNodeType.Cupola: //The gender of the word "cupola"
			switch(Translation.language) {
				case "es":
				case "de": this.gender = "female"; break;
				default: break;
			}
			break;
		case ConstructionNodeType.CupolaicBlend: //The gender of the word "cupolaic blend"
			switch(Translation.language) {
				case "es": this.gender = "female"; break;
				default: break;
			}
			break;
		case ConstructionNodeType.Cuploid: //The gender of the word "cuploid"
			switch(Translation.language) {
				case "es": this.gender = "male"; break;
				default: break;
			}
			break;
	}

	this._setGenders();
};

/**
 * Auxiliary function for [ConstructionNode.prototype.setGenders]{@linkcode ConstructionNode#setGenders}.
 * Once the root node's gender has been found, it is recursively passed down
 * to its succesive children.
 * @private
 */
ConstructionNode.prototype._setGenders = function() {
	//If the node has a single child:
	if(!this.children.length &amp;&amp; this.children._setGenders) {
		this.children.gender = this.gender;
		this.children._setGenders();
	}
	//If the node has an array of children:
	else {
		for(var i = 0; i &lt; this.children.length; i++) {
			var child = this.children[i];
			if(child._setGenders) {
				child.gender = this.gender;
				child._setGenders();
			}
		}
	}
};

/**
 * A multiprism of multiprisms is just a larger multiprism,
 * a multitegum of multitegums is just a larger multitegum, etc.
 * This function removes children nodes of the same type
 * and replaces them by their children.
 * @private
 */
ConstructionNode.prototype._mergeChildren = function() {
	var oldLength = this.children.length;
	for(var i = 0; i &lt; oldLength; i++) {
		if(this.children[i].type === this.type) {
			for(var j = 0; j &lt; this.children[i].children.length - 1; j++)
				this.children.push(this.children[i].children.pop());
			this.children[i] = this.children[i].children.pop();
		}
	}
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Sun Nov 01 2020 02:12:37 GMT-0600 (Central Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
