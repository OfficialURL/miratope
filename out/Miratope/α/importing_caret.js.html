<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>importing/caret.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/officialurl/miratope" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="AvlNode.html">AvlNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlNode.html#leftHeight">leftHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkLeft">linkLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkRight">linkRight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rightHeight">rightHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateLeft">rotateLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateRight">rotateRight</a></li></ul></li><li><a href="AvlTree.html">AvlTree</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlTree.html#.getBalanceState">getBalanceState</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#contains">contains</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximum">findMaximum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximumNode">findMaximumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimum">findMinimum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimumNode">findMinimumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#getNode">getNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#insert">insert</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#isEmpty">isEmpty</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#size">size</a></li></ul></li><li><a href="Caret.html">Caret</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Caret.html#advance">advance</a></li><li data-type='method' style='display: none;'><a href="Caret.html#getChar">getChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#increment">increment</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readNumber">readNumber</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readUntil">readUntil</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readWord">readWord</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToChar">skipToChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToContent">skipToContent</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToString">skipToString</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToStringList">skipToStringList</a></li><li data-type='method' style='display: none;'><a href="Caret.html#throwError">throwError</a></li></ul></li><li><a href="ConstructionNode.html">ConstructionNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ConstructionNode.html#getName">getName</a></li><li data-type='method' style='display: none;'><a href="ConstructionNode.html#setGenders">setGenders</a></li></ul></li><li><a href="Point.html">Point</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Point.html#.product">product</a></li><li data-type='method' style='display: none;'><a href="Point.html#clone">clone</a></li><li data-type='method' style='display: none;'><a href="Point.html#dimensions">dimensions</a></li><li data-type='method' style='display: none;'><a href="Point.html#scale">scale</a></li></ul></li><li><a href="Polytope.html">Polytope</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Polytope.html#._determinant">_determinant</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#._GGBReaderOnload">_GGBReaderOnload</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.adjacentEls">adjacentEls</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.cdToMatrix">cdToMatrix</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.dyad">dyad</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.nullitope">nullitope</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.point">point</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.prismProduct">prismProduct</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.regularPolygon">regularPolygon</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.semiregularPolygon">semiregularPolygon</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.spaceShape">spaceShape</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.verfLength">verfLength</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#circumradius">circumradius</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#extrudeToPyramid">extrudeToPyramid</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#getName">getName</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#move">move</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#moveNeg">moveNeg</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#polytopeToGraph">polytopeToGraph</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#renderTo">renderTo</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#saveAsOFF">saveAsOFF</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#scale">scale</a></li></ul></li><li><a href="PolytopeC.html">PolytopeC</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PolytopeC.html#faceToVertices">faceToVertices</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#gravicenter">gravicenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#recenter">recenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#setSpaceDimensions">setSpaceDimensions</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#toPolytopeC">toPolytopeC</a></li></ul></li><li><a href="SweeplineEdge.html">SweeplineEdge</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#rightVertex">rightVertex</a></li><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#updateRedirectTable">updateRedirectTable</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="BalanceState.html">BalanceState</a></li><li><a href="ConstructionNodeType.html">ConstructionNodeType</a></li><li><a href="Space.html">Space</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Space.html#.distance">distance</a></li><li data-type='method' style='display: none;'><a href="Space.html#.distanceSq">distanceSq</a></li><li data-type='method' style='display: none;'><a href="Space.html#.intersect">intersect</a></li></ul></li><li><a href="Translation.html">Translation</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Translation.html#.addAdjective">addAdjective</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.elementName">elementName</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.greekPrefix">greekPrefix</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-dependencies.html">How to update Miratope's dependencies?</a></li><li><a href="tutorial-translation_.html">How to translate Miratope?</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">importing/caret.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

/**
 * Creates a new Caret.
 * @constructor
 * @classdesc A helper class for reading imported text files.
 * Reads through a file, keeping track of its position, line, and column.
 * @param {string} contents The contents of the file.
 */
function Caret(contents) {
	this.contents = contents;
	/** The current position of the caret.
	 * @type {number} */
	this.pos = 0;
	/** The line number of the caret.
	 * @type {number} */
	this.line = 0; //Line
	/** The column number of the caret.
	 * @type {number} */
	this.column = 0;
	/** Stores whether the caret has reached the end of the file or not.
	 * @type {boolean} */
	this.EOF = contents.length === 0;
	this.skipToContent();
};

/** Moves the caret to the next column or the next line.
 * Automatically keeps track of [this.pos]{@linkcode Caret#pos},
 * [this.line]{@linkcode Caret#line}, [this.column]{@linkcode Caret#column}, and
 * [this.EOF]{@linkcode Caret#EOF}. Assumes Windows-style line endings.
 * @see [Caret.prototype.advance]{@linkcode Caret#advance}.
 * @todo Take care of Unix and Macintosh line endings.
 */
Caret.prototype.increment = function() {
	if(this.getChar() === '\n') {
		this.line++;
		this.column = 0;
	}
	else
		this.column++;
	this.EOF = ++this.pos > this.contents.length; //Checks if next position is the EOF
};

/**
 * Shortcut for calling [Caret.prototype.increment]{@linkcode Caret#increment}
 * repeatedly.
 * @param {number} n The number of times to call
 * [Caret.prototype.increment]{@linkcode Caret#increment}-
 */
Caret.prototype.advance = function(n) {
	for(var i = 0; i &lt; n; i++)
		this.increment();
};

/** Gets the character at the caret.
 * @returns {string} The current character.
 */
Caret.prototype.getChar = function() {
	return this.contents[this.pos];
};

/**
 * Increments the caret but skips whitespaces, new lines, and comments.
 * Leaves the caret at the beginning of the next "content".
 */
Caret.prototype.skipToContent = function() {
	while(!this.EOF) {
		switch(this.getChar()) {
			case '\n': //New Line (\n)
			case '\r': //Carriage Return (\r)
			case ' ':  //Skips Whitespace
				this.increment(); break;
			case '#':  //Skips Comments
				this.increment();
				//A comment lasts from the # until the end of the line.
				//Increments until you hit the EOF or a new line character.
				while(!this.EOF &amp;&amp; this.getChar() !== '\n')
					this.increment();
				this.increment();
				break;
			default:
				return;
		}
	}
};

/**
 * Increments the caret until a certain character is reached.
 * Caret ends up before the character.
 * @param {string} char A character to search for.
 * @example
 * var C = new Caret("The quick brown fox jumps over the lazy dog.");
 * C.skipToChar('q');
 * //The |quick brown fox jumps over the lazy dog.
 *
 * //4
 * console.log(C.pos);
 */
 Caret.prototype.skipToChar = function(char) {
	while(!this.EOF &amp;&amp; this.getChar() !== char)
		this.increment();
};

/**
 * Increments the caret until a certain string is read.
 * Caret ends up after the string.
 * @see [Caret.prototype.skipToStringList]{@linkcode Caret#skipToStringList}.
 * @param {string} str A string to search for.
 * @example
 * var C = new Caret("The quick brown fox jumps over the lazy dog.");
 * C.skipToString("fox");
 * //The quick brown fox| jumps over the lazy dog.
 *
 * //19
 * console.log(C.pos);
 */
Caret.prototype.skipToString = function(str) {
	var matches = 0;

	while(!this.EOF &amp;&amp; matches &lt; str.length) {
		if(this.getChar() === str[matches])
			matches++;
		else
			matches = 0;
		this.increment();
	}
};

/**
 * Increments the caret until one in a list of strings is read.
 * Caret ends up after the string.
 * @see [Caret.prototype.skipToString]{@linkcode Caret#skipToString}.
 * @param {string[]} strs The list of strings to search for.
 * @returns {number} The index of the first found string.
 * @example
 * var C = new Caret("The quick brown fox jumps over the lazy dog.");
 * C.skipToStringList(["quick", "lazy"]);
 * //The quick| brown fox jumps over the lazy dog.
 *
 * //9
 * console.log(C.pos);
 */
Caret.prototype.skipToStringList = function(strs) {
	var matches = []; //Counts the amount of matching letters per string.

	while(!this.EOF) {
		var c = this.getChar();

		//Updates matches.
		for(var i = 0; i &lt; strs.length; i++) {
			if(c === strs[i][matches[i]])
				matches[i]++;
			else
				matches[i] = 0;
		}

		this.increment();

		//Checks if a match was completed.
		for(var i = 0; i &lt; strs.length; i++)
			if(matches[i] >= strs[i].length)
				return i;
	}

	return -1; //EOF.
};

/**
 * Reads the next word from the caret position until a whitespace, newline or hash appears.
 * appears.
 * Caret automatically [skips to next content]{@link Caret#skipToContent}
 * afterwards.
 * @returns {number} The read number, or `NaN` if the caret isn't immmediately
 * before a number.
 * @throws Will throw an error if the caret is currently at the EOF.
 * @throws Will throw an error if the read number is invalid.
 */
Caret.prototype.readWord = function() {
	if(this.EOF) //EOF error
		this.throwError("unexpectedEOF");

	var initIndx = this.pos, endIndx;

	WHILELOOP:
	do {
		switch(this.getChar()) {
			case '\n': //New Line (\n)
			case '\r': //Carriage Return (\r)
			case ' ': //Space ( )
			case '#': //Hashtag (#)
				break WHILELOOP; //Leave the do-while loop immediately
			default:
				this.increment();
				break;
		}
	}
	while(!this.EOF); //Until you hit the EOF.

	var endIndx = this.pos;
	this.skipToContent();

	//Returns the substring found
	return this.contents.substr(initIndx, endIndx - initIndx);
};


/**
 * Advances the caret until a certain character is reached.
 * Places the caret at the left of such char.
 * @param {string} char The searched-for character.
 * @returns {string} The read substring.
 */
Caret.prototype.readUntil = function(char) {
	if(this.EOF) //EOF error
		this.throwError("unexpectedEOF");

	var initIndx = this.pos, endIndx;

	do {
		if(this.getChar() === char)
			break; //Leave the do-while loop immediately
		else
			this.increment();
	}
	while(!this.EOF); //Until you hit the EOF.

	var endIndx = this.pos;

	//Returns the substring found
	return this.contents.substr(initIndx, endIndx - initIndx);
};

/**
 * Reads the next number from the caret position, until a non-numeric character
 * appears. Supports numbers in the scientific notation format (e.g. 1E+10).
 * Caret automatically [skips to next content]{@link Caret#skipToContent}
 * afterwards.
 * @returns {number} The read number, or `NaN` if the caret isn't immmediately
 * before a number.
 * @throws Will throw an error if the caret is currently at the EOF.
 * @throws Will throw an error if the read number is invalid.
 */
Caret.prototype.readNumber = function() {
	if(this.EOF) //EOF error
		this.throwError("unexpectedEOF");

	var initIndx = this.pos, endIndx;

	WHILELOOP:
	do {
		switch(this.getChar()) {
			case '+':
			case '-':
			case '.':
			case 'e':
			case 'E':
			case '0': case '1': case '2': case '3': case '4':
			case '5': case '6': case '7': case '8': case '9':
				this.increment();
				break;
			default:
				break WHILELOOP; //Leave the do-while loop immediately
		}
	}
	while(!this.EOF); //Until you hit EOF

	endIndx = this.pos;
	this.skipToContent();

	//We return NaN only when the read number is in fact the empty string.
	if(endIndx === initIndx)
		return NaN;

	var res = parseFloat(this.contents.substr(initIndx, endIndx - initIndx));
	if(isNaN(res))
		this.throwError("invalidNumber");
	return res;
};

/**
 * Throws an error corresponding to the error code.
 * Automatically inserts the line and column numbers
 * into the error message.
 * @throws The corresponding error.
 */
Caret.prototype.throwError = function(code) {
	throw new Error(
		Translation.get("error/" + code,
		{
			line: this.line,
			column: this.column
		}
	));
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Sat Dec 19 2020 13:43:01 GMT-0600 (Central Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
