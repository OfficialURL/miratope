<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>importing/ggb.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/officialurl/miratope" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="AvlNode.html">AvlNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlNode.html#leftHeight">leftHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkLeft">linkLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkRight">linkRight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rightHeight">rightHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateLeft">rotateLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateRight">rotateRight</a></li></ul></li><li><a href="AvlTree.html">AvlTree</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlTree.html#.getBalanceState">getBalanceState</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#contains">contains</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximum">findMaximum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximumNode">findMaximumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimum">findMinimum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimumNode">findMinimumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#getNode">getNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#insert">insert</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#isEmpty">isEmpty</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#size">size</a></li></ul></li><li><a href="Caret.html">Caret</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Caret.html#advance">advance</a></li><li data-type='method' style='display: none;'><a href="Caret.html#getChar">getChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#increment">increment</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readNumber">readNumber</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readUntil">readUntil</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readWord">readWord</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToChar">skipToChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToContent">skipToContent</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToString">skipToString</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToStringList">skipToStringList</a></li><li data-type='method' style='display: none;'><a href="Caret.html#throwError">throwError</a></li></ul></li><li><a href="ConstructionNode.html">ConstructionNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ConstructionNode.html#getName">getName</a></li><li data-type='method' style='display: none;'><a href="ConstructionNode.html#setGenders">setGenders</a></li></ul></li><li><a href="Point.html">Point</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Point.html#.padLeft">padLeft</a></li><li data-type='method' style='display: none;'><a href="Point.html#.padRight">padRight</a></li><li data-type='method' style='display: none;'><a href="Point.html#.product">product</a></li><li data-type='method' style='display: none;'><a href="Point.html#add">add</a></li><li data-type='method' style='display: none;'><a href="Point.html#addCoordinate">addCoordinate</a></li><li data-type='method' style='display: none;'><a href="Point.html#clone">clone</a></li><li data-type='method' style='display: none;'><a href="Point.html#dimensions">dimensions</a></li><li data-type='method' style='display: none;'><a href="Point.html#project">project</a></li><li data-type='method' style='display: none;'><a href="Point.html#scale">scale</a></li><li data-type='method' style='display: none;'><a href="Point.html#subtract">subtract</a></li></ul></li><li><a href="Polytope.html">Polytope</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Polytope.html#._determinant">_determinant</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.adjacentEls">adjacentEls</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.cdToMatrix">cdToMatrix</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.dyad">dyad</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.nullitope">nullitope</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.point">point</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.prismProduct">prismProduct</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.regularPolygon">regularPolygon</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.semiregularPolygon">semiregularPolygon</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.spaceShape">spaceShape</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#.verfLength">verfLength</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#circumradius">circumradius</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#extrudeToPyramid">extrudeToPyramid</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#getName">getName</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#move">move</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#moveNeg">moveNeg</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#polytopeToGraph">polytopeToGraph</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#renderTo">renderTo</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#saveAsGGB">saveAsGGB</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#saveAsOFF">saveAsOFF</a></li><li data-type='method' style='display: none;'><a href="Polytope.html#scale">scale</a></li></ul></li><li><a href="PolytopeC.html">PolytopeC</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PolytopeC.html#faceToVertices">faceToVertices</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#gravicenter">gravicenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#recenter">recenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#setSpaceDimensions">setSpaceDimensions</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#toPolytopeC">toPolytopeC</a></li></ul></li><li><a href="SweeplineEdge.html">SweeplineEdge</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#rightVertex">rightVertex</a></li><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#updateRedirectTable">updateRedirectTable</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="BalanceState.html">BalanceState</a></li><li><a href="ConstructionNodeType.html">ConstructionNodeType</a></li><li><a href="Space.html">Space</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Space.html#.area">area</a></li><li data-type='method' style='display: none;'><a href="Space.html#.distance">distance</a></li><li data-type='method' style='display: none;'><a href="Space.html#.distanceSq">distanceSq</a></li><li data-type='method' style='display: none;'><a href="Space.html#.intersect">intersect</a></li><li data-type='method' style='display: none;'><a href="Space.html#.sameSlope">sameSlope</a></li></ul></li><li><a href="Translation.html">Translation</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Translation.html#.addAdjective">addAdjective</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.elementName">elementName</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.greekPrefix">greekPrefix</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-dependencies.html">How to update Miratope's dependencies?</a></li><li><a href="tutorial-translation_.html">How to translate Miratope?</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Scene">Scene</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">importing/ggb.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

//The part of the Polytope class for reading and writing to GGB files.

/**
 * A GGB file is really just a ZIP file in disguise.
 * This ZIP file contains an XML called geogebra.xml.
 * This function will be called with this XML's data as a string.
 * It will store the 3D polyhedron into the global variable `P`.
 * @summary Stores the polyhedron described by an XML file
 * into the global variable `P`.
 * @private
 * @param {string} e The contents of the file.
 * @todo Load the polyhedron into a scene,
 * instead of loading it into a global variable.
 */
Polytope._GGBReaderOnload = function(e) {
	var caret = new Caret(e),
  elementList = [[], [], [], []],
  vertDict = {}, //Dictionary to convert from GeoGebra point names to indices.
  edgeDict = {}, //Dictionary to convert from edges to indices.
  lst = ['&lt;element type="point"', '&lt;element type="point3d"', '&lt;command name="Polygon">'],
  component,
  i, j;

  WHILELOOP:
  while(true) {
    switch(caret.skipToStringList(lst)) {
      case -1: //EOF.
        break WHILELOOP;
      case 0: //Reading a 2D point.
        //Reads the point name.
        caret.skipToString('label="');
        var lbl = caret.readUntil('"');
        vertDict[lbl] = elementList[0].length;

        //Reads the coordinates.
        caret.skipToString('&lt;coords x="');
        var x = caret.readNumber(); caret.advance(5);
        var y = caret.readNumber(); caret.advance(5);
        var z = caret.readNumber(); caret.advance(5);
        x /= z; y /= z; z /= z;

        elementList[0].push(new Point([x, y, 0]));
        break;
      case 1: //Reading a 3D point.
        //Reads the point name.
        caret.skipToString('label="');
        var lbl = caret.readUntil('"');
        vertDict[lbl] = elementList[0].length;

        //Reads the coordinates.
        caret.skipToString('&lt;coords x="');
        var x = caret.readNumber(); caret.advance(5);
        var y = caret.readNumber(); caret.advance(5);
        var z = caret.readNumber(); caret.advance(5);
        var w = caret.readNumber(); caret.advance(5);
        x /= w; y /= w; z /= w;

        elementList[0].push(new Point([x, y, z]));
        break;
      case 2: //Reading a polygon.
        //Reads vertex names.
        caret.skipToString('&lt;input a0=');
        var verts = [];
        while(caret.getChar() !== '/') {
          caret.skipToChar('"'); caret.increment();
          var str = caret.readUntil('"');
          verts.push(vertDict[str]);
          caret.increment();
        }
        verts.push(verts[0]); //Simulates a cyclic order.

        //Adds edges.
        var edges = [];
        for(i = 0; i &lt; verts.length - 1; i++) {
          //Orders the edge, so that their key (identifier) is unique.
          var edge = [verts[i], verts[i + 1]];
          if(edge[0] > edge[1]) {
            var t = edge[0];
            edge[0] = edge[1];
            edge[1] = t;
          }

          //Adds the edge to elementList if needed.
          var key = edge[0] + "_" + edge[1];
          if(edgeDict[key] === undefined) {
            edgeDict[key] = elementList[1].length;
            elementList[1].push(edge);
          }
          edges.push(edgeDict[key]);
        }

        //Adds faces.
        elementList[2].push(edges);
        break;
      }
    }

    //Gets components.
    //Graph of incidences between facets.
    var graph = [],
    facets = elementList[2];
    for(i = 0; i &lt; facets.length; i++)
      graph.push(new GraphNode(i));

    //Calculates incidences.
    for(i = 0; i &lt; facets.length; i++)
      for(j = i + 1; j &lt; facets.length; j++)
        if(Polytope._checkCommonElements(facets[i], facets[j]))
          graph[i].connectTo(graph[j]);

    //Gets components.
    for(i = 0; i &lt; facets.length; i++) {
      component = graph[i].getComponent();
      if(component)
        elementList[3].push(component);
    }

    P = new PolytopeC(elementList);
};

/**
 * Saves a polytope as a GeoGebra file.
 * Writes most of the XML manually, just editing what's needed.
 * Only supports 3D stuff for now.
 * @summary Saves a polytope as a GeoGebra file.
 * @param {boolean} wireframe Whether faces are to be omitted.
 */
Polytope.prototype.saveAsGGB = function(wireframe) {
	var P = this.toPolytopeC(),
	//ggbs often come bundled with some other files,
	//but it seems geogebra.xml is the only one that's really needed.
	ggb = new JSZip(),
	scale = 200 / this.circumradius(),
	center = this.gravicenter().coordinates,
	fourD = this.spaceDimensions > 3, //Will the GGB file be a higher-dimensional projection?
	x = 1337, y, //Positioning (arbitrary but should be decently sized).
	// Header of geogebra.xml.
	// Some settings, like the viewpoint, should probably be changed depending on the passed polytope.
	file = '&lt;?xml version="1.0" encoding="utf-8"?>&lt;geogebra format="5.0" version="5.0.609.0" app="classic" platform="d" id="be4bb306-7dca-450f-9a95-cbe8a1c001b5"  xsi:noNamespaceSchemaLocation="http://www.geogebra.org/apps/xsd/ggb.xsd" xmlns="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >&lt;gui>&lt;window width="1366" height="728" />&lt;perspectives>&lt;perspective id="tmp">&lt;panes>&lt;pane location="" divider="0.8" orientation="1" />&lt;pane location="0" divider="0.15" orientation="1" />&lt;/panes>&lt;views>&lt;view id="4097" visible="false" inframe="true" stylebar="true" location="1,1,1,1" size="400" window="333,109,700,550" />&lt;view id="4" toolbar="0 || 2020 , 2021 , 2022 , 66 || 2001 , 2003 , 2002 , 2004 , 2005 || 2040 , 2041 , 2042 , 2044 , 2043" visible="false" inframe="false" stylebar="false" location="1,1" size="300" window="100,100,600,400" />&lt;view id="2" visible="true" inframe="false" stylebar="false" location="3,3" size="250" tab="ALGEBRA" window="100,100,250,400" />&lt;view id="8" toolbar="1001 | 1002 | 1003  || 1005 | 1004 || 1006 | 1007 | 1010 || 1008 1009 || 66 68 || 6" visible="false" inframe="false" stylebar="false" location="1,3" size="300" window="100,100,600,400" />&lt;view id="512" toolbar="0 | 1 501 5 19 , 67 | 2 15 45 18 , 7 37 | 514 3 9 , 13 44 , 47 | 16 51 | 551 550 11 ,  20 22 21 23 , 55 56 57 , 12 | 69 | 510 511 , 512 513 | 533 531 , 534 532 , 522 523 , 537 536 , 535 , 538 | 521 520 | 36 , 38 49 560 | 571 30 29 570 31 33 | 17 | 540 40 41 42 , 27 28 35 , 6 , 502" visible="true" inframe="false" stylebar="false" location="3,1" size="926" window="100,100,600,400" />&lt;view id="1" visible="' + fourD + '" inframe="false" stylebar="false" location="1" size="250" window="100,100,600,400" />&lt;view id="16" visible="false" inframe="false" stylebar="false" location="1" size="150" window="50,50,500,500" />&lt;view id="32" visible="false" inframe="false" stylebar="true" location="1" size="150" window="50,50,500,500" />&lt;view id="64" toolbar="0" visible="false" inframe="true" stylebar="true" location="1" size="150" window="50,50,500,500" />&lt;view id="70" toolbar="0 || 2020 || 2021 || 2022" visible="false" inframe="true" stylebar="true" location="1" size="150" window="50,50,500,500" />&lt;/views>&lt;toolbar show="true" items="0 39 73 62 | 1 501 67 , 5 19 , 72 75 76 | 2 15 45 , 18 65 , 7 37 | 4 3 8 9 , 13 44 , 58 , 47 | 16 51 64 , 70 | 10 34 53 11 , 24  20 22 , 21 23 | 55 56 57 , 12 | 36 46 , 38 49  50 , 71  14  68 | 30 29 54 32 31 33 | 25 17 26 60 52 61 | 40 41 42 , 27 28 35 , 6" position="1" help="false" />&lt;input show="true" cmd="true" top="algebra" />&lt;dockBar show="true" east="true" />&lt;/perspective>&lt;/perspectives>&lt;labelingStyle  val="0"/>&lt;font size="12"/>&lt;/gui>&lt;euclidianView>&lt;viewNumber viewNo="1"/>&lt;coordSystem xZero="' + ((x - 0.4) * -50) + '" yZero="-0.3" scale="50.0" yscale="50.0"/>&lt;evSettings axes="false" grid="false" gridIsBold="false" pointCapturing="3" rightAngleStyle="1" checkboxSize="26" gridType="3"/>&lt;bgColor r="255" g="255" b="255"/>&lt;axesColor r="0" g="0" b="0"/>&lt;gridColor r="192" g="192" b="192"/>&lt;lineStyle axes="1" grid="0"/>&lt;axis id="0" show="false" label="" unitLabel="" tickStyle="1" showNumbers="true"/>&lt;axis id="1" show="false" label="" unitLabel="" tickStyle="1" showNumbers="true"/>&lt;/euclidianView>&lt;algebraView>&lt;mode val="1"/>&lt;auxiliary show="true"/>&lt;/algebraView>&lt;kernel>&lt;continuous val="false"/>&lt;usePathAndRegionParameters val="true"/>&lt;decimals val="2"/>&lt;angleUnit val="degree"/>&lt;algebraStyle val="0" spreadsheet="0"/>&lt;coordStyle val="0"/>&lt;/kernel>&lt;tableview min="-2.0" max="2.0" step="1.0"/>&lt;scripting blocked="false" disabled="false"/>&lt;euclidianView3D>&lt;coordSystem xZero="' + center[0] + '" yZero="' + center[1] + '" zZero="' + center[2] + '" scale="' + scale + '" xAngle="0" zAngle="0"/>&lt;evSettings axes="false" grid="false" gridIsBold="false" pointCapturing="3" rightAngleStyle="1" gridType="3"/>&lt;axis id="0" show="false" label="" unitLabel="" tickStyle="1" showNumbers="true"/>&lt;axis id="1" show="false" label="" unitLabel="" tickStyle="1" showNumbers="true"/>&lt;axis id="2" show="false" label="" unitLabel="" tickStyle="1" showNumbers="true"/>&lt;plate show="false"/>&lt;bgColor r="255" g="255" b="255"/>&lt;clipping use="false" show="false" size="1"/>&lt;projection type="0"/>&lt;/euclidianView3D>&lt;construction title="" author="" date="">',
	edge = 0, //Index for edge names.
	//The following are provisional until Miratope does automatic coloring.
	ptColor = [96, 96, 96], //RGB color of points.
	edgeColor = [0, 0, 0], //RGB color of edges.
	faceColor = [192, 192, 192], //RGB color of faces.
	opacity = 0.5, //Opacity of faces.
	i, j, m, n, //For loop variables.
	d = P.spaceDimensions;

	//If the polytope is 4D or up:
	if(fourD) {
		//Adds text.
		//Rotation angles.
		file += '&lt;expression label="txt1" exp="&amp;quot;\\text{Rotation angles:}&amp;quot;"/>&lt;element type="text" label="txt1">&lt;show object="true" label="true" ev="40"/>&lt;objColor r="0" g="0" b="0" alpha="0.0"/>&lt;layer val="0"/>&lt;labelMode val="0"/>&lt;isLaTeX val="true"/>&lt;font serif="true" sizeM="1.0" size="0" style="0"/>&lt;startPoint x="' + (x - 0.3) + '" y="-0.2" z="1.0"/>&lt;/element>';
		//Projection point.
		//y = d * (d - 1) / 2;
		//file += '&lt;expression label="txt2" exp="&amp;quot;\\text{Projection point:}&amp;quot;"/>&lt;element type="text" label="txt2">&lt;show object="true" label="true" ev="40"/>&lt;objColor r="0" g="0" b="0" alpha="0.0"/>&lt;layer val="0"/>&lt;labelMode val="0"/>&lt;isLaTeX val="true"/>&lt;font serif="true" sizeM="1.0" size="0" style="0"/>&lt;startPoint x="' + (x - 0.3) + '" y="' + (-y - 1.2) + '" z="1.0"/>&lt;/element>';

		//Adds rotation sliders.
		y = -1.3;
		for(i = 0; i &lt; d; i++)
			for(j = i + 1; j &lt; d; j++) {
				file += '&lt;element type="numeric" label="α_{' + i + ',' + j + '}">&lt;value val="0"/>&lt;show object="true" label="true"/>&lt;objColor r="0" g="0" b="0" alpha="0.1"/>&lt;layer val="0"/>&lt;labelMode val="1"/>&lt;slider min="0" max="(2 * π)" width="4.0" x="' + x + '" y="' + y + '" fixed="false" horizontal="true" showAlgebra="true"/>&lt;lineStyle thickness="10" type="0" typeHidden="1"/>&lt;animation step="0.01" speed="1" type="0" playing="false"/>&lt;ggbscript onUpdate=""/>&lt;/element>';
				y--;
			}

		/*
		//Adds projection point sliders.
		y--;
		for(i = 0; i &lt; d - 1; i++) {
			file += '&lt;element type="numeric" label="x_{' + i + '}">&lt;value val="0"/>&lt;show object="true" label="true"/>&lt;objColor r="0" g="0" b="0" alpha="0.1"/>&lt;layer val="0"/>&lt;labelMode val="1"/>&lt;slider min="-10" max="10" width="4.0" x="0" y="' + y + '" fixed="false" horizontal="true" showAlgebra="true"/>&lt;lineStyle thickness="10" type="0" typeHidden="1"/>&lt;animation step="0.01" speed="1" type="0" playing="false"/>&lt;ggbscript onUpdate=""/>&lt;/element>';
			y--;
		}
		file += '&lt;element type="numeric" label="x_{' + i + '}">&lt;value val="' + 5 +  '"/>&lt;show object="true" label="true"/>&lt;objColor r="0" g="0" b="0" alpha="0.1"/>&lt;layer val="0"/>&lt;labelMode val="1"/>&lt;slider min="-10" max="10" width="4.0" x="0" y="' + y + '" fixed="false" horizontal="true" showAlgebra="true"/>&lt;lineStyle thickness="10" type="0" typeHidden="1"/>&lt;animation step="0.01" speed="1" type="0" playing="false"/>&lt;ggbscript onUpdate=""/>&lt;/element>';

		//Adds projection point.
		file += '&lt;expression label="P" exp="{';
		for(i = 0; i &lt; d - 1; i++)
			file += 'x_{' + i + '},';
		file += 'x_{' + i + '}}" />&lt;element type="list" label="P">&lt;objColor r="0" g="100" b="0" alpha="0.1"/>&lt;lineStyle thickness="5" type="0" typeHidden="1"/>&lt;pointSize val="5"/>&lt;angleStyle val="0"/>&lt;symbolic val="true" />&lt;/element>';
		*/

		//ADD I
		file += '&lt;expression label="I" exp="{{1,0,0},{0,1,0},{0,0,1}';
		for(i = 3; i &lt; d; i++)
			file += ',{0,0,0}';
		file += '}"/>&lt;element type="list" label="I">&lt;objColor r="0" g="100" b="0" alpha="0.1"/>&lt;animation step="0.1" speed="1" type="0" playing="false"/>&lt;ggbscript val=""/>&lt;ggbscript onUpdate=""/>&lt;lineStyle thickness="5" type="0" typeHidden="1"/>&lt;pointSize val="5"/>&lt;angleStyle val="0"/>&lt;symbolic val="true" />&lt;/element>';

		//ADD M
		file += '&lt;expression label="M" exp="';
		for(i = 0; i &lt; d - 1; i++)
			for(j = i + 1; j &lt; d; j++) {
				file += '{';
				for(m = 0; m &lt; d; m++) {
					file += '{';
					for(n = 0; n &lt; d; n++) {
						if(m == i &amp;&amp; n == i)
							file += 'cos(α_{' + i + ',' + j + '})'
						else if(m === i &amp;&amp; n === j)
							file += '-sin(α_{' + i + ',' + j + '})'
						else if(m === j &amp;&amp; n === i)
							file += 'sin(α_{' + i + ',' + j + '})'
						else if(m === j &amp;&amp; n === j)
							file += 'cos(α_{' + i + ',' + j + '})'
						else if(m === n)
							file += '1';
						else
							file += '0';

						if(n === d - 1)
							file += '}';
						else
							file += ',';
					}

					if(m === d - 1)
						file += '}';
					else
						file += ',';
				}

				if(i !== d - 2 || j !== d - 1)
					file += '*';
			}

		file += '"/>&lt;element type="list" label="M">&lt;objColor r="0" g="100" b="0" alpha="0.1"/>&lt;animation step="0.1" speed="1" type="0" playing="false"/>&lt;ggbscript val=""/>&lt;ggbscript onUpdate=""/>&lt;lineStyle thickness="5" type="0" typeHidden="1"/>&lt;pointSize val="5"/>&lt;angleStyle val="0"/>&lt;symbolic val="true" />&lt;/element>';

		//Adds real vertices.
		for(i = 0; i &lt; P.elementList[0].length; i++) {
			var coordList = '{';
			//The coordinates need to be in uppercase, since for example 1e+10 = 2.718281+10 by GeoGebra's standards.
			for(j = 0; j &lt; d - 1; j++)
				coordList += String(P.elementList[0][i].coordinates[j]).toUpperCase() + ',';
			coordList += String(P.elementList[0][i].coordinates[j]).toUpperCase() + '}';

			file += '&lt;expression label="P_{' + i + '}\'" exp="' + coordList + '"/>&lt;element type="list" label="P_{' + i + '}\'">&lt;objColor r="0" g="100" b="0" alpha="0.10000000149011612"/>&lt;animation step="0.1" speed="1" type="0" playing="false"/>&lt;lineStyle thickness="5" type="0" typeHidden="1"/>&lt;pointSize val="5"/>&lt;angleStyle val="0"/>&lt;symbolic val="true" />&lt;/element>';
		}

		//Adds vertices.
		for(i = 0; i &lt; P.elementList[0].length; i++) {
			var coords = P.elementList[0][i].coordinates;
			file += '&lt;command name="Point">&lt;input a0="({P_{' + i + '}\'}*M*I)"/>&lt;output a0="P_{' + i + '}"/>&lt;/command>&lt;element type="point3d" label="P_{' + i + '}">&lt;show object="true" label="false" ev="4"/>&lt;objColor r="' + ptColor[0] + '" g="' + ptColor[1] + '" b="' + ptColor[2] + '" alpha="0.0"/>&lt;layer val="0"/>&lt;labelMode val="0"/>&lt;coords x="0" y="0" z="0" w="1.0"/>&lt;pointSize val="5"/>&lt;/element>';
		}
	}

	//Polyhedron:
	else{
		//Adds vertices.
		for(i = 0; i &lt; P.elementList[0].length; i++) {
			var coords = P.elementList[0][i].coordinates;
			//The coordinates need to be in uppercase, since for example 1e+10 = 2.718281+10 by GeoGebra's standards.
			file += '&lt;element type="point3d" label="P_{' + i + '}">&lt;show object="true" label="false" ev="4"/>&lt;objColor r="' + ptColor[0] + '" g="' + ptColor[1] + '" b="' + ptColor[2] + '" alpha="0.0"/>&lt;layer val="0"/>&lt;labelMode val="0"/>&lt;animation step="0.1" speed="1" type="1" playing="false"/>&lt;coords x="' + String(coords[0]).toUpperCase() + '" y="' + String(coords[1]).toUpperCase() + '" z="' + String(coords[2]).toUpperCase() + '" w="1.0"/>&lt;pointSize val="5"/>&lt;/element>';
		}
	}

	if(wireframe) {
		//Adds edges.
		for(i = 0; i &lt; P.elementList[1].length; i++)
			file += '&lt;command name="Segment">&lt;input a0="P_{' + P.elementList[1][i][0] + '}" a1="P_{' + P.elementList[1][i][1] + '}"/>&lt;output a0="e_{' + edge + '}"/>&lt;/command>&lt;element type="segment3d" label="e_{' + (edge++) + '}">&lt;show object="true" label="false" ev="4"/>&lt;objColor r="' + edgeColor[0] + '" g="' + edgeColor[1] + '" b="' + edgeColor[2] + '" alpha="0.0"/>&lt;layer val="0"/>&lt;labelMode val="0"/>&lt;lineStyle thickness="2" type="0" typeHidden="1"/>&lt;outlyingIntersections val="false"/>&lt;keepTypeOnTransform val="true"/>&lt;/element>';
	}
	else {
		//Adds faces.
		for(i = 0; i &lt; P.elementList[2].length; i++) {
			//Specifies vertices of face.
			file += '&lt;command name="Polygon">&lt;input ';
			var verts = P.faceToVertices(i);
			for(j = 0; j &lt; verts.length; j++)
				file += 'a' + j + '="P_{' + verts[j] + '}" ';
			file += '/>&lt;output a0="f_{' + i + '}" ';

			//Names the faces' edges.
			for(j = 0; j &lt; verts.length; j++)
				file += 'a' + (j + 1) + '="e_{' + (edge++) + '}" ';

			//Adds the face.
			file += '/>&lt;/command>&lt;element type="polygon3d" label="f_{' + i + '}">&lt;lineStyle thickness="5" type="0" typeHidden="1" opacity="178"/>&lt;show object="true" label="false" ev="4"/>&lt;objColor r="' + faceColor[0] + '" g="' + faceColor[1] + '" b="' + faceColor[2] + '" alpha="' + opacity + '"/>&lt;layer val="0"/>&lt;labelMode val="0"/>&lt;/element>';

			//Edges... again.
			edge -= verts.length;
			for(j = 0; j &lt; verts.length; j++)
				file += '&lt;element type="segment3d" label="e_{' + (edge++) + '}">&lt;show object="true" label="false" ev="4"/>&lt;objColor r="' + edgeColor[0] + '" g="' + edgeColor[1] + '" b="' + edgeColor[2] + '" alpha="0.0"/>&lt;layer val="0"/>&lt;labelMode val="0"/>&lt;auxiliary val="false"/>&lt;lineStyle thickness="2" type="0" typeHidden="1"/>&lt;outlyingIntersections val="false"/>&lt;keepTypeOnTransform val="true"/>&lt;/element>';
		}
	}

	//Closing tags.
	file += '&lt;/construction>&lt;/geogebra>';
	Polytope.fileName = Translation.firstToUpper(P.getName()) + ".ggb";

	//Save file.
	ggb.file("geogebra.xml", file);
	ggb.generateAsync({type:"blob"}).then(Polytope._saveBlob);
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Sun Dec 20 2020 20:38:46 GMT-0600 (Central Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
