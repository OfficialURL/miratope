<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>file operations/off.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/officialurl/miratope" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="AvlNode.html">AvlNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlNode.html#leftHeight">leftHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkLeft">linkLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#linkRight">linkRight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rightHeight">rightHeight</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateLeft">rotateLeft</a></li><li data-type='method' style='display: none;'><a href="AvlNode.html#rotateRight">rotateRight</a></li></ul></li><li><a href="AvlTree.html">AvlTree</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AvlTree.html#.getBalanceState">getBalanceState</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#contains">contains</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximum">findMaximum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMaximumNode">findMaximumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimum">findMinimum</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#findMinimumNode">findMinimumNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#getNode">getNode</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#insert">insert</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#isEmpty">isEmpty</a></li><li data-type='method' style='display: none;'><a href="AvlTree.html#size">size</a></li></ul></li><li><a href="Caret.html">Caret</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Caret.html#advance">advance</a></li><li data-type='method' style='display: none;'><a href="Caret.html#getChar">getChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#increment">increment</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readNumber">readNumber</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readUntil">readUntil</a></li><li data-type='method' style='display: none;'><a href="Caret.html#readWord">readWord</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToChar">skipToChar</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToContent">skipToContent</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToString">skipToString</a></li><li data-type='method' style='display: none;'><a href="Caret.html#skipToStringList">skipToStringList</a></li><li data-type='method' style='display: none;'><a href="Caret.html#throwError">throwError</a></li></ul></li><li><a href="ConstructionNode.html">ConstructionNode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ConstructionNode.html#getName">getName</a></li><li data-type='method' style='display: none;'><a href="ConstructionNode.html#setGenders">setGenders</a></li></ul></li><li><a href="Point.html">Point</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Point.html#.padLeft">padLeft</a></li><li data-type='method' style='display: none;'><a href="Point.html#.padRight">padRight</a></li><li data-type='method' style='display: none;'><a href="Point.html#.product">product</a></li><li data-type='method' style='display: none;'><a href="Point.html#add">add</a></li><li data-type='method' style='display: none;'><a href="Point.html#addCoordinate">addCoordinate</a></li><li data-type='method' style='display: none;'><a href="Point.html#clone">clone</a></li><li data-type='method' style='display: none;'><a href="Point.html#dimensions">dimensions</a></li><li data-type='method' style='display: none;'><a href="Point.html#project">project</a></li><li data-type='method' style='display: none;'><a href="Point.html#scale">scale</a></li><li data-type='method' style='display: none;'><a href="Point.html#subtract">subtract</a></li></ul></li><li><a href="PolytopeC.html">PolytopeC</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PolytopeC.html#faceToVertices">faceToVertices</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#gravicenter">gravicenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#recenter">recenter</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#scale">scale</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#setSpaceDimensions">setSpaceDimensions</a></li><li data-type='method' style='display: none;'><a href="PolytopeC.html#toPolytopeC">toPolytopeC</a></li></ul></li><li><a href="Scene.html">Scene</a></li><li><a href="SweeplineEdge.html">SweeplineEdge</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#getId">getId</a></li><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#rightVertex">rightVertex</a></li><li data-type='method' style='display: none;'><a href="SweeplineEdge.html#updateRedirectTable">updateRedirectTable</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="BalanceState.html">BalanceState</a></li><li><a href="ConstructionNodeType.html">ConstructionNodeType</a></li><li><a href="Space.html">Space</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Space.html#.area">area</a></li><li data-type='method' style='display: none;'><a href="Space.html#.distance">distance</a></li><li data-type='method' style='display: none;'><a href="Space.html#.distanceSq">distanceSq</a></li><li data-type='method' style='display: none;'><a href="Space.html#.intersect">intersect</a></li><li data-type='method' style='display: none;'><a href="Space.html#.sameSlope">sameSlope</a></li></ul></li><li><a href="Translation.html">Translation</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Translation.html#.addAdjective">addAdjective</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.elementName">elementName</a></li><li data-type='method' style='display: none;'><a href="Translation.html#.greekPrefix">greekPrefix</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-dependencies.html">How to update Miratope's dependencies?</a></li><li><a href="tutorial-translation_.html">How to translate Miratope?</a></li></ul><h3>Global</h3><ul><li><a href="global.html#BalanceState%255Bundefined%255D">BalanceState[undefined]</a></li><li><a href="global.html#ConstructionNodeType%255Bundefined%255D">ConstructionNodeType[undefined]</a></li><li><a href="global.html#keys">keys</a></li><li><a href="global.html#mouseButtons">mouseButtons</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">file operations/off.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const polytopeTypes_1 = require("../polytopes/polytopeTypes");
const translation_1 = require("../translation/translation");
const fileOperations_1 = require("./fileOperations");
/**
 * Saves the current polytope as an OFF file.
 * @param {Object=} options The file saving options.
 * @param {boolean=} options.comments Whether the file should contain comments
 * specifying separations between element types.
 * @todo Deal with the nulltope case.
 */
polytopeTypes_1.PolytopeB.prototype.saveAsOFF = function (options = {}) {
    var P = this.toPolytopeC();
    //We'll deal with this later.
    if (!P.elementList[0])
        return;
    //Maybe automatically project the polytope?
    if (P.spaceDimensions > P.dimensions)
        throw new Error("The OFF format does not support polytopes in spaces with more dimensions than themselves.");
    //The contexts of the OFF file, as an array of plaintext strings.
    let data = [], 
    //I should be using precise counts here.
    pluralAndUppercase = { count: 1000, uppercase: true }, comments = options.comments;
    //The element counts of the polytope, as strings.
    let elementCounts = [];
    for (let i = 0; i &lt; P.elementList.length; i++)
        elementCounts.push(P.elementList[i].length);
    //Writes the element counts, and optionally, leaves a comment listing their names in order.
    switch (P.dimensions) {
        case 0: //LOL
            data.push("0OFF");
            break;
        case 1: //Also LOL
            data.push("1OFF\n");
            if (comments)
                data.push("# ", translation_1.Translation.elementName(0, pluralAndUppercase), "\n");
            data.push(elementCounts[0].toString(), "\n");
            break;
        case 2:
            data.push("2OFF\n");
            if (comments)
                data.push("# ", translation_1.Translation.elementName(0, pluralAndUppercase), ", ", translation_1.Translation.get("misc/component", pluralAndUppercase), "\n");
            data.push(elementCounts[0].toString(), " ", elementCounts[2].toString(), "\n");
            break;
        case 3:
            data.push("OFF\n"); //For compatibility with Stella.
            if (comments)
                data.push("# ", translation_1.Translation.elementName(0, pluralAndUppercase), ", ", translation_1.Translation.elementName(2, pluralAndUppercase), ", ", translation_1.Translation.elementName(1, pluralAndUppercase), "\n");
            data.push(elementCounts[0].toString(), " ", elementCounts[2].toString(), " ", elementCounts[1].toString(), "\n");
            break;
        default:
            data.push(P.dimensions.toString(), "OFF\n");
            if (comments) {
                data.push("# ", translation_1.Translation.elementName(0, pluralAndUppercase), ", ", translation_1.Translation.elementName(2, pluralAndUppercase), ", ", translation_1.Translation.elementName(1, pluralAndUppercase));
                for (let i = 3; i &lt; P.dimensions; i++)
                    data.push(", ", translation_1.Translation.elementName(i, pluralAndUppercase));
                data.push("\n");
            }
            data.push(elementCounts[0].toString(), " ", elementCounts[2].toString(), " ", elementCounts[1].toString(), " ");
            for (let i = 3; i &lt; P.dimensions - 1; i++)
                data.push(elementCounts[i].toString(), " ");
            data.push(elementCounts[P.dimensions - 1].toString(), "\n");
    }
    //Adds vertices. Fills in zeros if spaceDimensions &lt; dimensions.
    if (comments)
        data.push("\n# ", translation_1.Translation.elementName(0, pluralAndUppercase), "\n");
    for (let i = 0; i &lt; P.elementList[0].length; i++) {
        for (let j = 0; j &lt; P.dimensions - 1; j++) {
            let coord = P.elementList[0][i].coordinates[j];
            if (coord === undefined)
                data.push("0 ");
            else
                data.push(coord.toString(), " ");
        }
        let coord = P.elementList[0][i].coordinates[P.dimensions - 1];
        if (coord === undefined)
            data.push("0\n");
        else
            data.push(coord.toString(), "\n");
    }
    //Adds faces, or copmonents for compound polygons.
    if (P.elementList[2]) {
        if (comments) {
            if (P.dimensions === 2)
                data.push("\n# ", translation_1.Translation.get("misc/component", pluralAndUppercase), "\n");
            else
                data.push("\n# ", translation_1.Translation.elementName(2, pluralAndUppercase), "\n");
        }
        for (let i = 0; i &lt; elementCounts[2]; i++) {
            let vertices = P.faceToVertices(i);
            data.push(P.elementList[2][i].length.toString());
            for (let j = 0; j &lt; P.elementList[2][i].length; j++)
                data.push(" ", vertices[j].toString());
            data.push("\n");
        }
    }
    //Adds the rest of the elements.
    for (let d = 3; d &lt; P.dimensions; d++) {
        if (comments)
            data.push("\n# ", translation_1.Translation.elementName(d, pluralAndUppercase), "\n");
        for (let i = 0; i &lt; P.elementList[d].length; i++) {
            let len = P.elementList[d][i].length;
            data.push(len.toString());
            for (let j = 0; j &lt; len; j++)
                data.push(" ", P.elementList[d][i][j]);
            data.push("\n");
        }
    }
    fileOperations_1.FileOperations.fileName = translation_1.Translation.firstToUpper(P.getName()) + ".off";
    fileOperations_1.FileOperations.saveBlob(new Blob(data, { type: "text/plain" }));
};
//# sourceMappingURL=off.js.map</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Wed Dec 23 2020 17:36:43 GMT-0600 (Central Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
